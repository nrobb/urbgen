<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>UrbGen - Procedural Generation of Urban Environments</title>
<link rel="shortcut icon" type="image/png" href="images/favicon.png"/>

<script src="vendor/three.js/three.min.js"></script>
<script src="vendor/three.js/OrbitControls.js"></script>
<script src="vendor/three.js/Detector.js"></script>
<script src="vendor/dat.gui/dat.gui.min.js"></script>
<script src="vendor/filesaver.js/FileSaver.js"></script>

<script src="js/UrbGen.js"></script>
<script src="js/UrbGenApp.js"></script>

<script type="text/javascript">
	function toggleInstructions() {
		var instructions = document.getElementById("instructions");
		if (instructions.style.display === 'block') {
			instructions.style.display = 'none';
		} else {
			instructions.style.display = 'block';
		}
	}
</script>

<link rel="stylesheet" type="text/css" href="css/main.css">

</head>
<body>
	<div id="main_container">
		<div id="urbgen_viewer">
			<script>
				// check for webgl
				if (!Detector.webgl) {
					Detector.addGetWebGLMessage();
				}
				// Launch the application
				try {
					var app = new URBGEN_APP.App();
					window.addEventListener("resize", function() {
					  app.onResize(window.innerWidth, window.innerHeight);
					});
					app.run();
				} catch (e) {
					console.log(e);
					if (window.localStorage === undefined) {
						alert("Error: window.localStorage is undefined.\r\n"
								+ "Sorry, your browser doesn't support local storage. "
								+ "Try using the latest version of Chrome or Firefox.");
					}
				}
			</script>
		</div>
		<div id="info_container">
			<div id="logo">
				<img id="logo" alt="UrbGen" src="images/logo.png"> <input
					id="question_mark_button" alt="info" type="image"
					src="images/questionmark.png" class="imgAssignUnassign"
					onclick="toggleInstructions()" />
			</div>
			<div id="instructions">
				<h1>How to use UrbGen</h1>
				<p>UrbGen is a JavaScript library for the procedural generation
					of urban environments. It can be used via this web app or as a
					standalone library. UrbGen was created by
					<a href="http://nigelrobb.tumblr.com" target="blank">Nigel Robb</a>.
				</p>
				<h2>Using the UrbGen web app</h2>
				<p>Use the control panel to set the parameters for your city.</p>
				<p>Hit 'update' to generate and display a new city.</p>
				<p>UrbGen is procedural, not random - the same parameters will
					always generate the same city.</p>
				<p>'Random' generates a city with random parameters.</p>
				<p>You can download a Wavefront.obj file of the currently
					displayed model using 'exportOBJ'.</p>
				<p>You can also download a text file containing the parameters
					of the currently displayed city by hitting 'exportParams'. This can
					then be used with the UrbGen library (see below) to generate this
					city in your code.</p>
				<p>Use the left mouse button to rotate the model, the right
					mouse button to move it, and the scroll wheel (or two fingers on a
					trackpad) to zoom in or out.</p>
				<h2>Using the UrbGen library</h2>
				<p>
					Download the <a href="js/UrbGen.js" target="blank">script</a> and
					include it in your code:
				</p>
				<code>&lt;script src="path/to/script/UrbGen.js"&gt;</code>
				<br>
				<p>Next, instantiate a generator object:</p>
				<code>var generator = new URBGEN.Generator()</code>
				<p>Create an object to store the parameters for your city:</p>
				<code>
					var cityParams = {<br> &nbsp;&nbsp;globalAngle: 0.1,<br>
					&nbsp;&nbsp;blockSize: 30000,<br> &nbsp;&nbsp;cityWidth: 1000,<br>
					&nbsp;&nbsp;cityDepth: 500,<br> &nbsp;&nbsp;streetWidth: 25,<br>
					&nbsp;&nbsp;localGrids: 0.4,<br> &nbsp;&nbsp;randomSeed: 0.6,<br>
					&nbsp;&nbsp;throughRoads: 27<br> }
				</code>
				<p>
					You can use the web app to see how changing these values affects
					the layout of a city. As mentioned above, you can also use the web
					app to save a set of values. If you set any of these values to
					<code>undefined</code>
					, the value will be randomised.
				</p>
				<p>UrbGen also defines constant maximum and minimum values for
					each parameter:</p>
				<code>
					URBGEN.Constants.MAX_BLOCK_SIZE = 50000;<br>
					URBGEN.Constants.MIN_BLOCK_SIZE = 15000;<br>
					URBGEN.Constants.MAX_CITY_WIDTH = 2000;<br>
					URBGEN.Constants.MIN_CITY_WIDTH = 400;<br>
					URBGEN.Constants.MAX_CITY_DEPTH = 2000;<br>
					URBGEN.Constants.MIN_CITY_DEPTH = 400;<br>
					URBGEN.Constants.MAX_THROUGH_ROADS = 50;<br>
					URBGEN.Constants.MIN_THROUGH_ROADS = 0;<br>
					URBGEN.Constants.MAX_STREET_WIDTH = 30;<br>
					URBGEN.Constants.MIN_STREET_WIDTH = 10;<br>
					URBGEN.Constants.MAX_RANDOM_SEED = 1;<br>
					URBGEN.Constants.MIN_RANDOM_SEED = 0;<br>
					URBGEN.Constants.MAX_LOCAL_GRIDS = 1;<br>
					URBGEN.Constants.MIN_LOCAL_GRIDS = 0;<br>
					URBGEN.Constants.MAX_GLOBAL_ANGLE = 1;<br>
					URBGEN.Constants.MIN_GLOBAL_ANGLE = 0;
				</code>
				<p>These are suggested values; UrbGen will not restrict you
					setting values outside these ranges, but the results will be
					unpredictable.</p>
				<p>
					You're now ready to generate a city. Simply call the
					<code>generate()</code>
					method, passing in the parameters object. You can also call the
					method with no parameter object, which will randomise all the
					values. Either way, the method returns a
					<code>URBGEN.CityElement.City</code>:
				</p>
				<code>var city = generator.generate(cityParms)</code>
				<p>See the <a href="doc/index.html" target="blank">documentation</a>
				 for a description of a city's structure, including all methods and fields.
				</p>
				<h2>Using UrbGen with Three.js</h2>
				<p>Three.js is a popular library which makes WebGL more simple
					to use. UrbGen provides a helper method to convert your city
					into a Three.js geometry.</p>
				<p>First, make sure you've included the Three.js script in your code
				 (if you're planning on using Three.js you've probaby already
				 done this):</p>
				<code>&lt;script src="path/to/script/three.js"&gt;</code>
				<p>Once you've generated your city (as above), you need to use the
				 <code>URBGEN.Generator.getThreeJSGeometry</code>
				  method. This method takes either a single
				  <code>URBGEN.CityElement</code> or an array of
				  <code>URBGEN.CityElement</code>.
				  Simply pass the elements in and the method returns a geometry:
				</p>
				<code>
					var threeGeometry = generator.getThreeJSGeometry([cityElement]);
				</code>
				<p>
					You can now use this geometry to create a
					<code>Three.Mesh</code>
					. For more information, see the <a href="doc/index.html"
						target="blank">documentation</a>.
				</p>
				<p>
					<button id="hide_button" onclick="toggleInstructions()">Close</button>
				</p>
			</div>
		</div>
	</div>
</body>
</html>
